{"version":3,"sources":["webpack:///./src/pages/getting-started/common-tasks/new-widget.mdx"],"names":["layoutProps","MDXContent","props","layout","DefaultLayout","render","this","components","name","Layout","Object","assign","id","parentName","React","Component","_frontmatter"],"mappings":"+SAKA,IAAMA,EAAc,GACCC,E,qHACnB,WAAYC,GAAO,aACjB,cAAMA,IAAN,MACKC,OAASC,IAFG,E,mBAKnBC,OAAA,WAAS,MAIHC,KAAKJ,MAFPK,EAFK,EAELA,WACGL,E,oIAHE,mBAKP,OAAO,kBAAC,SAAD,CAAQM,KAAK,UAAUC,OAAQH,KAAKH,OAAQH,YAAaU,OAAOC,OAAO,GAAIX,EAAaE,GAAQK,WAAYA,GAEjH,wBAAIK,GAAG,+BAAP,+BACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,uBAAiE,kBAAC,SAAD,CAAQC,KAAK,IAAID,WAAYA,EAAYM,WAAW,IAAIX,MAAO,CAC5H,KAAQ,8CADqD,wBAAjE,+EAGA,wBAAIU,GAAG,uBAAP,uBACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,gCAA0E,kBAAC,SAAD,CAAQC,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,gBAA1E,kRACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,GAC5B,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,mFAEF,kBAAC,SAAD,CAAQL,KAAK,MAAMD,WAAYA,GAAY,kBAAC,SAAD,CAAQC,KAAK,OAAOD,WAAYA,EAAYM,WAAW,MAAMX,MAAO,CAC3G,UAAa,kBAD0B,+DAI3C,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYL,MAAO,CAC/C,MAAS,IAET,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,+BAA0F,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,MAA7D,uDAA1F,MAEF,kBAAC,SAAD,CAAQL,KAAK,MAAMD,WAAYA,GAAY,kBAAC,SAAD,CAAQC,KAAK,OAAOD,WAAYA,EAAYM,WAAW,MAAMX,MAAO,CAC3G,UAAa,gBAD0B,kEAM3C,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,GAA7B,0DAAoG,kBAAC,SAAD,CAAQC,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,gDAApG,KACA,kBAAC,SAAD,CAAQL,KAAK,MAAMD,WAAYA,GAAY,kBAAC,SAAD,CAAQC,KAAK,OAAOD,WAAYA,EAAYM,WAAW,MAAMX,MAAO,CAC3G,UAAa,gBAD0B,2EAQ3C,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYL,MAAO,CAC/C,MAAS,IAET,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,uCAEF,kBAAC,SAAD,CAAQL,KAAK,MAAMD,WAAYA,GAAY,kBAAC,SAAD,CAAQC,KAAK,OAAOD,WAAYA,EAAYM,WAAW,MAAMX,MAAO,CAC3G,UAAa,gBAD0B,ueAgB3C,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,GAA7B,sOACA,wBAAIK,GAAG,+CAAP,+CACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,0IACA,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,GAC5B,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,oMACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,2LACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,uHAEF,wBAAID,GAAG,sBAAP,sBACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,wHAAkK,kBAAC,SAAD,CAAQC,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,wDAAlK,mOAAwgB,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,0BAAxgB,KAAknB,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,0BAAlnB,OAA8tB,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,iBAA9tB,6HACA,kBAAC,SAAD,CAAQL,KAAK,MAAMD,WAAYA,GAAY,kBAAC,SAAD,CAAQC,KAAK,OAAOD,WAAYA,EAAYM,WAAW,MAAMX,MAAO,IAApE,4PAS3C,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,GAC5B,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,iEACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,6EACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,uIACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,+LACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,4FACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,kIACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,uE,GA7FgCC,IAAMC,WAmGjCC,EAAe","file":"component---src-pages-getting-started-common-tasks-new-widget-mdx-aaef7aca6e922c8a1949.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/home/jenkins/workspace/ran-facing-services-tools_master/packages/documentation/src/layouts/SidebarLayout.jsx\";\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = DefaultLayout;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" Layout={this.layout} layoutProps={Object.assign({}, layoutProps, props)} components={components}>\n\n      <h1 id=\"creating-a-new-react-widget\">Creating a new React widget</h1>\n      <MDXTag name=\"p\" components={components}>{`Note: Check out the `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"/getting-started/common-tasks/new-feature\"\n        }}>{`Adding a new feature`}</MDXTag>{` doc to make sure you're trying to add the right type of feature to VA.gov.`}</MDXTag>\n      <h2 id=\"adding-a-new-widget\">Adding a new widget</h2>\n      <MDXTag name=\"p\" components={components}>{`All the static pages use the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`static-pages`}</MDXTag>{` entry bundle, so any JS code included from that file will be on all static pages. In order to add a widget, you'll want to create a function that loads your desired React components (or plain JS) asynchronously, and mounts to an element on the page with your widget id.`}</MDXTag>\n      <MDXTag name=\"ol\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`Add a mount point element in the static content page your widget will live on:`}</MDXTag>\n      </MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-html\"\n        }}>{`<div data-widget-type=\"my-new-widget\" id=\"someId\"></div>\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"ol\" components={components} props={{\n        \"start\": 2\n      }}>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`Add a start up function to: `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`src/applications/static-pages/static-pages-entry.js`}</MDXTag>{`:`}</MDXTag>\n      </MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-js\"\n        }}>{`...\ncreateMyWidget(store, widgetTypes.MY_NEW_WIDGET);\n...\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`You should also add a constant for your widget type in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`src/applications/static-pages/widgetTypes.js`}</MDXTag>{`:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-js\"\n        }}>{`export default {\n  ...\n  MY_NEW_WIDGET: 'my-new-widget',\n  ...\n}\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"ol\" components={components} props={{\n        \"start\": 3\n      }}>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`Write your create widget function:`}</MDXTag>\n      </MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-js\"\n        }}>{`export default async function createMyWidget(store, widgetType) {\n  const widget = document.querySelector(\\`[data-widget-type=\"\\${widgetType}\"]\\`);\n\n  if (widget) {\n    // Load widget if there's a mount point for it\n    const {\n      default: MyNewWidget,\n    } = await import(/* webpackChunkName: \"my-new-widget\" */ '../../platform/site-wide/my-new-widget');\n\n    // Do whatever you need to do to start up your widget\n    ReactDOM.render(<MyNewWidget>, widget);\n  }\n}\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Note that we don't import the widget code unless there's a mount point in the DOM. This function will run on every page, so we want to make sure we only download the bulk of the widget code when we're actually going to use it.`}</MDXTag>\n      <h2 id=\"guidelines-for-using-react-on-a-static-page\">Guidelines for using React on a static page</h2>\n      <MDXTag name=\"p\" components={components}>{`We should be careful to not create a bad user experience when using React on static pages. Here are some guidelines you should follow:`}</MDXTag>\n      <MDXTag name=\"ol\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`JS and React take time to download, parse, and render. Make sure you are providing the appropriate feedback to users while that is happening, with a spinner or another method from the UX team.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`Make sure the page is still usable if your React code fails to work. This can mean it fails to download, an error occurs, or just handling the different login states a user can be in.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`Be aware of how much weight you're adding to the static-pages bundle and code-split/lazy load when it makes sense.`}</MDXTag>\n      </MDXTag>\n      <h2 id=\"common-widget-code\">Common widget code</h2>\n      <MDXTag name=\"p\" components={components}>{`There's a simple static page widget feature that you can use to help with the first two points above. The code is in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`src/applications/static-pages/static-page-widgets.js`}</MDXTag>{`. Using this will inline some JS that can handle displaying a loading spinner and showing an error message if something goes wrong before the React code can take over rendering. Several pension pages use this functionality (`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`pages/pension/index.md`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`pages/pension/apply.md`}</MDXTag>{` in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`vagov-content`}</MDXTag>{`). It's controlled by defining a widgets list in the front matter for the static content page you're on. The options are:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`- widgets\n  - root: someId \n    timeout: 20\n    showSpinnerUnauthed: false\n    slowLoadingThreshold: 6\n    loadingMessage: Loading\n    slowMessage: Sorry, this is taking longer than expected.\n    errorMessage: Sorry, something went wrong.\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"ul\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`root: The id of the div where the React component will mount.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`timeout: The amount of time in seconds before the error message is shown.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`showSpinnerUnauthed: By default, a spinner is shown only if a user has a session token. This will override that and show it always.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`slowLoadingThreshold: The amount of time in seconds before the slow loading message is shown. This is skipped if the threshold is greater than the overall timeout. Defaulted to 6 seconds.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`slowMessage: Message shown when the slowThreshold is passed. Defaulted to message above.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`loadingMessage: Message shown while the JS code is loading. This should probably match any loading message in your React code.`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`errorMessage: Message shown when the JS code fails or times out.`}</MDXTag>\n      </MDXTag>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {};\n    "],"sourceRoot":""}