{"version":3,"sources":["webpack:///./src/pages/platform/architecture/static-site/index.mdx"],"names":["layoutProps","MDXContent","props","layout","DefaultLayout","render","this","components","name","Layout","Object","assign","id","className","parentName","React","Component","_frontmatter"],"mappings":"iPAKA,IAAMA,EAAc,GACCC,E,oBACnB,WAAYC,GAAO,aACjB,cAAMA,IAAN,MACKC,OAASC,IAFG,E,0GAKnBC,OAAA,WAAS,MAIHC,KAAKJ,MAFPK,EAFK,EAELA,WACGL,E,oIAHE,mBAKP,OAAO,kBAAC,SAAD,CAAQM,KAAK,UAAUC,OAAQH,KAAKH,OAAQH,YAAaU,OAAOC,OAAO,GAAIX,EAAaE,GAAQK,WAAYA,GAEjH,wBAAIK,GAAG,sBAAP,sBACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,sUACA,wBAAIK,GAAG,yBAAP,yBACA,yBAAKC,UAAU,WAAf,uwBAgBA,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,GAA7B,6QACA,wBAAIK,GAAG,gCAAP,gCACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,yCAAmF,kBAAC,SAAD,CAAQC,KAAK,aAAaD,WAAYA,EAAYO,WAAW,KAA7D,YAAnF,2GAAqR,kBAAC,SAAD,CAAQN,KAAK,aAAaD,WAAYA,EAAYO,WAAW,KAA7D,mBAArR,4DACA,wBAAIF,GAAG,0CAAP,0CACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,iRAA2T,kBAAC,SAAD,CAAQC,KAAK,aAAaD,WAAYA,EAAYO,WAAW,KAA7D,kBAA3T,8CAAsc,kBAAC,SAAD,CAAQN,KAAK,aAAaD,WAAYA,EAAYO,WAAW,KAA7D,SAAtc,OAAiiB,kBAAC,SAAD,CAAQN,KAAK,aAAaD,WAAYA,EAAYO,WAAW,KAA7D,WAAjiB,O,GApCkCC,IAAMC,WAyCjCC,EAAe","file":"component---src-pages-platform-architecture-static-site-index-mdx-a1425fed27cd3eb5c6c5.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/home/jenkins/workspace/ran-facing-services-tools_master/packages/documentation/src/layouts/SidebarLayout.jsx\";\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = DefaultLayout;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" Layout={this.layout} layoutProps={Object.assign({}, layoutProps, props)} components={components}>\n\n      <h1 id=\"site-build-process\">Site build process</h1>\n      <MDXTag name=\"p\" components={components}>{`The main build process for VA.gov is controlled with Metalsmith, which is a simple, plugin-based static site generator. We take content from two sources, the vagov-content repo and the VA's Drupal CMS, create pages based on that data plus templates, run a series of other plugins, and then output the resulting html pages.`}</MDXTag>\n      <h2 id=\"metalsmith-build-flow\">Metalsmith build flow</h2>\n      <div className=\"mermaid\">{`graph TD\n1[Metalsmith build pipeline] -->|Markdown from vagov-content| A\n1 -->|Drupal content| K\nA[Create page objects from each Markdown file] -->B[Convert Markdown to html]\nB --> C[Generate sidebars for Markdown content]\nC--> D[Add local static assets to pipeline]\nD --> E[Apply layout templates to page data]\nE -->F[Generate header/footer data]\nF --> G[Create sitemap]\nG --> H[Check for broken links]\nH -->|Drupal pages| N[Download assets referenced in Drupal content from Drupal]\nH -->|Markdown pages| I[Webpack build]\nN --> I\nI --> J[Write HTML/CSS/JS and other static files to build output folder]\nK[Query Drupal via GraphQL or fetch from local cache] --> L[Create page objects from query results]\nL --> D`}</div>\n      <MDXTag name=\"p\" components={components}>{`There are other plugins than the ones listed in this diagram, but these are the most important ones. The process is very similar for Markdown and Drupal content, mostly differing in how the content is initially converted into page objects for Metalsmith to process.`}</MDXTag>\n      <h2 id=\"metalsmith-code-organization\">Metalsmith code organization</h2>\n      <MDXTag name=\"p\" components={components}>{`Metalsmith related code is located in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`src/site`}</MDXTag>{`. Most of the code in that folder are temlates for Drupal content. The build process code is located in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`src/site/stages`}</MDXTag>{` which contains Metalsmith plugins and GraphQL queries. `}</MDXTag>\n      <h2 id=\"drupal-templates-vs-markdown-templates\">Drupal templates vs Markdown templates</h2>\n      <MDXTag name=\"p\" components={components}>{`Due to the differences in the shape of data in vagov-content vs Drupal, we have two different sets of templates, one for each source. There are some shared templates, but these are largely restricted to the header and footer templates. Drupal related templates end with `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`.drupal.liquid`}</MDXTag>{` and Markdown templates typically end with `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`.html`}</MDXTag>{` or `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`.liquid`}</MDXTag>{`.`}</MDXTag>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {};\n    "],"sourceRoot":""}