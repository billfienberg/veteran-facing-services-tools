{"version":3,"sources":["webpack:///./src/pages/platform/architecture/cms.mdx"],"names":["layoutProps","MDXContent","props","layout","DefaultLayout","render","this","components","name","Layout","Object","assign","id","parentName","className","React","Component","_frontmatter"],"mappings":"qPAKA,IAAMA,EAAc,GACCC,E,oBACnB,WAAYC,GAAO,aACjB,cAAMA,IAAN,MACKC,OAASC,IAFG,E,0GAKnBC,OAAA,WAAS,MAIHC,KAAKJ,MAFPK,EAFK,EAELA,WACGL,E,oIAHE,mBAKP,OAAO,kBAAC,SAAD,CAAQM,KAAK,UAAUC,OAAQH,KAAKH,OAAQH,YAAaU,OAAOC,OAAO,GAAIX,EAAaE,GAAQK,WAAYA,GAEjH,wBAAIK,GAAG,4CAAP,6CACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,sbACA,kBAAC,SAAD,CAAQC,KAAK,IAAID,WAAYA,GAA7B,mMACA,wBAAIK,GAAG,4BAAP,4BACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,iEACA,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,GAC5B,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,OAAkE,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC9H,KAAQ,oEADsD,sBAAlE,0BAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,OAAkE,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC9H,KAAQ,mEADsD,qBAAlE,gDAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,uDACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAArD,uDAEF,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,GAA7B,4EACA,wBAAIK,GAAG,uBAAP,uBACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,0FACA,kBAAC,SAAD,CAAQC,KAAK,QAAQD,WAAYA,GAC/B,kBAAC,SAAD,CAAQC,KAAK,QAAQD,WAAYA,EAAYM,WAAW,SACtD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,eAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,YAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,wBAKJ,kBAAC,SAAD,CAAQM,KAAK,QAAQD,WAAYA,EAAYM,WAAW,SACtD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,eAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,0BADT,0BAGH,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,uBADT,wBAIL,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,WAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,8BADT,8BAGH,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,2BADT,4BAIL,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,cAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,2BADT,2BAGH,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,uBADT,0BAMT,wBAAIU,GAAG,yCAAP,yCACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,+SAAyV,kBAAC,SAAD,CAAQC,KAAK,IAAID,WAAYA,EAAYM,WAAW,IAAIX,MAAO,CACpZ,KAAQ,sCAD6U,UAAzV,uFAEgH,kBAAC,SAAD,CAAQM,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,kBAFhH,iBAE8N,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,UAF9N,oCAEuV,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,cAFvV,yDAEye,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,UAFze,6BAGA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,GAC5B,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAAK,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CACtH,KAAQ,uCAD8C,qCAG1D,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAAK,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CACtH,KAAQ,2IAD8C,0BAG1D,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAAK,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CACtH,KAAQ,gGAD8C,qBAI5D,wBAAIU,GAAG,qCAAP,qCACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,8aAAwd,kBAAC,SAAD,CAAQC,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,iBAAxd,qFACA,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,GAC5B,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAAK,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CACtH,KAAQ,sEAD8C,+BAG1D,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAAK,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CACtH,KAAQ,0GAD8C,6BAI5D,wBAAIU,GAAG,cAAP,cACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,yUACA,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,GAC5B,kBAAC,SAAD,CAAQC,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAAK,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CACtH,KAAQ,2DAD8C,2BAG1D,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,MAAK,kBAAC,SAAD,CAAQL,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CACtH,KAAQ,kEAD8C,sCAI5D,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,GAA7B,gTACA,kBAAC,SAAD,CAAQC,KAAK,IAAID,WAAYA,GAA7B,0UACA,wBAAIK,GAAG,kBAAP,kBACA,kBAAC,SAAD,CAAQJ,KAAK,IAAID,WAAYA,GAA7B,2iBACA,kBAAC,SAAD,CAAQC,KAAK,QAAQD,WAAYA,GAC/B,kBAAC,SAAD,CAAQC,KAAK,QAAQD,WAAYA,EAAYM,WAAW,SACtD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,eAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,YAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,wBAKJ,kBAAC,SAAD,CAAQM,KAAK,QAAQD,WAAYA,EAAYM,WAAW,SACtD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,eAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,kCADT,kCAGH,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,uBADT,wBAIL,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,WAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,sCADT,sCAGH,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,2BADT,4BAIL,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,SACnD,kBAAC,SAAD,CAAQL,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OADX,cAGA,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,mCADT,mCAGH,kBAAC,SAAD,CAAQM,KAAK,KAAKD,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,MAAS,OACR,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,EAAYM,WAAW,KAAKX,MAAO,CAC/D,KAAQ,mBADT,sBAMT,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,GAA7B,sDAAgG,kBAAC,SAAD,CAAQC,KAAK,IAAID,WAAYA,EAAYM,WAAW,IAAIX,MAAO,CAC3J,KAAQ,iGADoF,2BAAhG,KAGA,kBAAC,SAAD,CAAQM,KAAK,IAAID,WAAYA,GAA7B,4EAAsH,kBAAC,SAAD,CAAQC,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,YAAtH,kFAA+R,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,gBAA/R,mDAA6a,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,gBAA7a,0FAAkmB,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,gBAAlmB,yBAAstB,kBAAC,SAAD,CAAQL,KAAK,aAAaD,WAAYA,EAAYM,WAAW,KAA7D,8CAAttB,KACA,wBAAID,GAAG,+BAAP,+BACA,yBAAKE,UAAU,WAAf,wf,GAvMkCC,IAAMC,WAwNjCC,EAAe","file":"component---src-pages-platform-architecture-cms-mdx-a1cace355e58d5b69a96.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/home/jenkins/workspace/ran-facing-services-tools_master/packages/documentation/src/layouts/SidebarLayout.jsx\";\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = DefaultLayout;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" Layout={this.layout} layoutProps={Object.assign({}, layoutProps, props)} components={components}>\n\n      <h1 id=\"vagov-content-management-system-overview\">VA.gov content management system overview</h1>\n      <MDXTag name=\"p\" components={components}>{`The VA is currently in the process of moving content from several other systems into one primary content management system, powered by Drupal. VA.gov takes a decoupled approach, where content editors make change in a Drupal environment, then VA.gov build process queries that Drupal instance and transforms the resulting content into static html that is deployed on the site. Drupal does not control any Veteran-facing page rendering.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`In addition, there is a system that can be used to view content changes on demand, outside of the typical build process, so that content editors can preview their changes before they go live.`}</MDXTag>\n      <h2 id=\"existing-content-sources\">Existing content sources</h2>\n      <MDXTag name=\"p\" components={components}>{`Content displayed on VA.gov exists in four primary locations:`}</MDXTag>\n      <MDXTag name=\"ul\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`The `}<MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"https://github.com/department-of-veterans-affairs/vagov-content\"\n          }}>{`vagov-content repo`}</MDXTag>{`, in Markdown and YAML`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`The `}<MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"https://github.com/department-of-veterans-affairs/vets-website\"\n          }}>{`vets-website repo`}</MDXTag>{` (footer link data in JSON, plus templating)`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`Teamsite, the VA's legacy content management system`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\">{`Drupal, the VA's current content management system`}</MDXTag>\n      </MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Eventually, all this content will be consolidated and moved into Drupal.`}</MDXTag>\n      <h2 id=\"drupal-environments\">Drupal environments</h2>\n      <MDXTag name=\"p\" components={components}>{`All Drupal environments require you to either be on the VA network or the SOCKS proxy.`}</MDXTag>\n      <MDXTag name=\"table\" components={components}>\n        <MDXTag name=\"thead\" components={components} parentName=\"table\">\n          <MDXTag name=\"tr\" components={components} parentName=\"thead\">\n            <MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`Environment`}</MDXTag>\n            <MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`Site url`}</MDXTag>\n            <MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`VA.gov environment`}</MDXTag>\n          </MDXTag>\n        </MDXTag>\n        <MDXTag name=\"tbody\" components={components} parentName=\"table\">\n          <MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`development`}</MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"http://dev.cms.va.gov\"\n              }}>{`http://dev.cms.va.gov`}</MDXTag></MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"https://dev.va.gov\"\n              }}>{`https://dev.va.gov`}</MDXTag></MDXTag>\n          </MDXTag>\n          <MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`staging`}</MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"http://staging.cms.va.gov\"\n              }}>{`http://staging.cms.va.gov`}</MDXTag></MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"https://staging.va.gov\"\n              }}>{`https://staging.va.gov`}</MDXTag></MDXTag>\n          </MDXTag>\n          <MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`production`}</MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"http://prod.cms.va.gov\"\n              }}>{`http://prod.cms.va.gov`}</MDXTag></MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"https://www.va.gov\"\n              }}>{`https://www.va.gov`}</MDXTag></MDXTag>\n          </MDXTag>\n        </MDXTag>\n      </MDXTag>\n      <h2 id=\"how-content-is-transformed-into-pages\">How content is transformed into pages</h2>\n      <MDXTag name=\"p\" components={components}>{`VA.gov is a static html/js/css site, built with a static site generator tool called Metalsmith. During the Metalsmith build process we query the appropriate Drupal environment with a GraphQL query. The results of that query are transformed into pages through the Metalsmith build pipeline. There are `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://shopify.github.io/liquid/\"\n        }}>{`liquid`}</MDXTag>{` templates specific to page content that came from Drupal, generally denoted with a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`.drupal.liquid`}</MDXTag>{` suffix. Each `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`entity`}</MDXTag>{` from Drupal has a corresponding `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`entityType`}</MDXTag>{`, which is used to choose the entry template for each `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`entity`}</MDXTag>{` (i.e. page) from Drupal.`}</MDXTag>\n      <MDXTag name=\"ul\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"/platform/architecture/static-site\"\n          }}>{`Metalsmith build process diagram`}</MDXTag></MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/site/stages/build/drupal/graphql/GetAllPages.graphql.js\"\n          }}>{`Primary GraphQL query`}</MDXTag></MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/tree/master/src/site/layouts\"\n          }}>{`Entry templates`}</MDXTag></MDXTag>\n      </MDXTag>\n      <h2 id=\"jenkins-build-process-integration\">Jenkins build process integration</h2>\n      <MDXTag name=\"p\" components={components}>{`Drupal is queried in the Jenkins build process for any vets-website branch. On Jenkins, however, there is a caching mechanism to help deal with downtime and other failures in the live Drupal environments. After any successful master build, the results of the GraphQL query and any files downloaded from Drupal during the build process are put into a tarball and uploaded to S3. For builds on any branch, if the site build (the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`npm run build`}</MDXTag>{` command) fails, Jenkins will download the appropriate cache and retry the build.`}</MDXTag>\n      <MDXTag name=\"ul\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"/platform/architecture/build-deploy-flows#standard-masterpr-build\"\n          }}>{`Jenkins build process flow`}</MDXTag></MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/tree/master/script/drupal-aws-cache.js\"\n          }}>{`Drupal/AWS cache script`}</MDXTag></MDXTag>\n      </MDXTag>\n      <h2 id=\"deployment\">Deployment</h2>\n      <MDXTag name=\"p\" components={components}>{`A typical cms deploys content changes to users immediately, because the content is stored in the same system that renders the pages that contain that content. In our decoupled approach, however, content needs to be run through the VA.gov build process before it can go live. There are two ways of getting content onto VA.gov:`}</MDXTag>\n      <MDXTag name=\"ul\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"/platform/architecture/build-deploy-flows#daily-deploy\"\n          }}>{`Scheduled daily deploy`}</MDXTag></MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"/platform/architecture/build-deploy-flows#content-only-deploy\"\n          }}>{`Off schedule content only deploy`}</MDXTag></MDXTag>\n      </MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The scheduled deploy begins at 2pm ET, and fetches new content from Drupal before deploying. The off schedule deploy is a Jenkins job that can be triggered from a button in the production Drupal environment which will get the currently released code and update it with the latest content from Drupal.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Off schedule deploys can be done for all environments, however there are separate Jenkins jobs for production vs staging/dev.The main difference is that dev/staging deploys update the latest builds from vets-website master with new content and the production deploy updates the latest released code on VA.gov with new content.`}</MDXTag>\n      <h2 id=\"preview-server\">Preview server</h2>\n      <MDXTag name=\"p\" components={components}>{`A typical cms also provides an easy way to preview changes before making them live, because it can render unpublished content with the templates and rendering logic in the same cms. A decoupled approach can't do this by default, so we created a preview server to emulate it. The preview servers query Drupal for the latest unpublished revision of a specified page, then run an abbreviated verion of the Metalsmith build process for that single page and return the resulting html. This is done per request and the results are not written to the server.`}</MDXTag>\n      <MDXTag name=\"table\" components={components}>\n        <MDXTag name=\"thead\" components={components} parentName=\"table\">\n          <MDXTag name=\"tr\" components={components} parentName=\"thead\">\n            <MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`Environment`}</MDXTag>\n            <MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`Site url`}</MDXTag>\n            <MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`VA.gov environment`}</MDXTag>\n          </MDXTag>\n        </MDXTag>\n        <MDXTag name=\"tbody\" components={components} parentName=\"table\">\n          <MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`development`}</MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"http://preview-dev.vfs.va.gov\"\n              }}>{`http://preview-dev.vfs.va.gov`}</MDXTag></MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"https://dev.va.gov\"\n              }}>{`https://dev.va.gov`}</MDXTag></MDXTag>\n          </MDXTag>\n          <MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`staging`}</MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"http://preview-staging.vfs.va.gov\"\n              }}>{`http://preview-staging.vfs.va.gov`}</MDXTag></MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"https://staging.va.gov\"\n              }}>{`https://staging.va.gov`}</MDXTag></MDXTag>\n          </MDXTag>\n          <MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}>{`production`}</MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"http://preview-prod.vfs.va.gov\"\n              }}>{`http://preview-prod.vfs.va.gov`}</MDXTag></MDXTag>\n            <MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\n              \"align\": null\n            }}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\n                \"href\": \"https://va.gov\"\n              }}>{`https://va.gov`}</MDXTag></MDXTag>\n          </MDXTag>\n        </MDXTag>\n      </MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The preview server is written in Node and Express, `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/master/script/preview.js\"\n        }}>{`located in vets-website`}</MDXTag>{`.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Requests that are made to the preview server that are not to the special `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`/preview`}</MDXTag>{` route are proxied to the associated live site. So, for example, a request for `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`/health-care`}</MDXTag>{` on the staging preview server will request the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`/health-care`}</MDXTag>{` page from staging.va.gov. If you were trying to preview an unpublished version of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`/health-care`}</MDXTag>{` page you would go to `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`/preview?nodeId=<id of health care entity>`}</MDXTag>{`.`}</MDXTag>\n      <h3 id=\"preview-server-request-flow\">Preview server request flow</h3>\n      <div className=\"mermaid\">{`graph TD\nA(Request made to preview-prod.vfs.va.gov) -->B{Request made to /preview?}\nB -->|No|C\nB -->|Yes|D\nC[Return content of same url from va.gov]-->E(Done)\nD[Get node id from nodeId url parameter]-->F[Request latest unpublished revision of node id]\nD-->G[Fetch latest header/footer data]\nD -->H[Fetch latest JS asset manifest]\nG-->I\nH-->I\nF-->I\nI[Run Metalsmith build pipeline on returned Drupal content] -->J\nJ[Return HTML to requestor]-->K(Done)`}</div>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {};\n    "],"sourceRoot":""}