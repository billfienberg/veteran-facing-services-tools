{"version":3,"sources":["webpack:///./src/pages/platform/site-structure/client-overview.mdx"],"names":["layoutProps","MDXContent","props","layout","DefaultLayout","render","this","components","name","Layout","Object","assign","id","parentName","React","Component","_frontmatter"],"mappings":"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","file":"component---src-pages-platform-site-structure-client-overview-mdx-65d2dbea91c89a73fbc9.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/home/jenkins/workspace/ran-facing-services-tools_master/packages/documentation/src/layouts/SidebarLayout.jsx\";\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = DefaultLayout;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" Layout={this.layout} layoutProps={Object.assign({}, layoutProps, props)} components={components}>\n\n      <h1 id=\"vagov-client-overview\">VA.gov client overview</h1>\n      <MDXTag name=\"p\" components={components}>{`Welcome to the VA digital services platform front-end overview. The goal of this article is to provide a high level overview of our front end architecture to get you oriented with the `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://github.com/department-of-veterans-affairs/vets-website\"\n        }}>{`vets-website`}</MDXTag>{` repository.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The overall architecture for VA.gov is comprised of an API backend written in Ruby on Rails (`}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://github.com/department-of-veterans-affairs/vets-api\"\n        }}>{`vets-api`}</MDXTag>{`) and a static front-end, written in HTML, CSS, and Javascript (`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`vets-website`}</MDXTag>{`). There's no server-side rendering or processing for the front-end; the build process compiles everything into static resources which are served to users.`}</MDXTag>\n      <h2 id=\"build-process\">Build process</h2>\n      <MDXTag name=\"p\" components={components}>{`The build process for this is controlled by a tool called `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"http://www.metalsmith.io/\"\n        }}>{`Metalsmith`}</MDXTag>{`, which is a pluggable Node.js static site generator. In general, everything in Metalsmith is a plugin, so if you're looking for specific parts of the build process, expect to check out a plugin or two. We use Metalsmith because it's flexible and because it's Javascript based, it's easy to integrate with the rest of our tools.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The build process has two primary kinds of functionality that it processes: static content pages and Javascript applications. Most of VA.gov consists of content that lives in Markdown files and is converted into HTML by a Metalsmith plugin. There are shared templates and other enhancements to make this content easier to structure. This content lives in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`content/pages`}</MDXTag>{`, which also provides the basic URL structure of the site.`}</MDXTag>\n      <h2 id=\"javascript-applications\">Javascript applications</h2>\n      <MDXTag name=\"p\" components={components}>{`Javascript applications are the other type of functionality in vets-website. These applications are written in `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://reactjs.org/\"\n        }}>{`React`}</MDXTag>{` and `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://redux.js.org/\"\n        }}>{`Redux`}</MDXTag>{` and live in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`src/applications/`}</MDXTag>{` in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`vets-website`}</MDXTag>{`. For each app you'll find a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`manifest.json`}</MDXTag>{` file that contains application information. You'll find the root url of the application, which you can use to navigate to that application on the site. These applications also usually have client-side routes, so opening that root url may allow you to click to other pages that are fully client-side, and not based on pages in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`content/pages`}</MDXTag>{`.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`If you're a developer, most of your time will likely be spent working on a React application. We use React because it's widely used by front end developers and provides a good balance of performance and approachability. We also use Redux to manage application state, also because it's commonly used with React and fits most of the applications on VA.gov well. We use `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://reacttraining.com/react-router/\"\n        }}>{`React Router`}</MDXTag>{` for client-side routing and `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://webpack.js.org/\"\n        }}>{`Webpack`}</MDXTag>{` as a build tool, both of which are the `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`de facto`}</MDXTag>{` standards in the Javascript world. For styles we use `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://sass-lang.com/\"\n        }}>{`Sass`}</MDXTag>{` and for dependency management we use `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://yarnpkg.com/en/\"\n        }}>{`Yarn`}</MDXTag>{`.`}</MDXTag>\n      <h2 id=\"design-system\">Design system</h2>\n      <MDXTag name=\"p\" components={components}>{`You will also find that our visual components and site-wide styles live in an external `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://department-of-veterans-affairs.github.io/design-system/\"\n        }}>{`design system`}</MDXTag>{`. This design system is based on the `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://designsystem.digital.gov/\"\n        }}>{`US Web Design System`}</MDXTag>{`, with some additional modifications by our team. As part of that design system, we provide a set of React components covering common patterns, which is `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://www.npmjs.com/package/@department-of-veterans-affairs/formation\"\n        }}>{`published to npm`}</MDXTag>{`. You'll likely use these components to make your apps accessible and consistent with the rest of VA.gov.`}</MDXTag>\n      <h2 id=\"routing-for-react-apps\">Routing for React apps</h2>\n      <h3 id=\"production\">Production</h3>\n      <MDXTag name=\"p\" components={components}>{`The production deployment of the vet-website front end consists of static HTML, CSS, and JS assets deployed to an Amazon S3 bucket. We have an nginx server that serves those static assets and does some extra route handling for our single page React apps.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`React applications have a single entry page in the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`content/pages`}</MDXTag>{` folder and a special nginx `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://github.com/department-of-veterans-affairs/devops/blob/master/ansible/deployment/config/revproxy-vetsgov/vars/react_routes.yml\"\n        }}>{`config entry`}</MDXTag>{`. Each of the React applications listed in that config are standalone single page apps, and for each of the urls listed in that section of the config, the nginx server routes anything that starts with that url to the static page at that url, instead of trying to find a content page at that spot in the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`content/pages`}</MDXTag>{` folder structure. See the example below for a step by step view of that process.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`When that page is loaded and the JS bundle is downloaded and parsed, React Router sees the original route, removes the base url specified in the entry page from it, and routes to the page configured in the routes for the React app.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`In summary, nginx routes a variety of different urls to the same static entry page, and React Router renders the correct component based on the route configuration client side.`}</MDXTag>\n      <h4 id=\"example\">Example</h4>\n      <MDXTag name=\"p\" components={components}>{`Here's an example using the claim status application:`}</MDXTag>\n      <MDXTag name=\"ol\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`User opens `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`va.gov/track-claims/your-claims/2344/detail`}</MDXTag></MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`Nginx serves `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`va.gov/track-claims/index.html`}</MDXTag>{`, because `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`/track-claims`}</MDXTag>{` is configured as a React application`}</MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`In the browser, the JS bundle loads and React Router sees a url of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`/track-claims/your-claims/2344/detail`}</MDXTag></MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ol\">{`Since React Router has a base url of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`/track-claims`}</MDXTag>{`, it runs its routing logic on `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`/your-claims/2344/detail`}</MDXTag>{`, and renders the appropriate component for that url.`}</MDXTag>\n      </MDXTag>\n      <MDXTag name=\"p\" components={components}>{`One other thing to note is that links that use the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Link`}</MDXTag>{` component or the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`router`}</MDXTag>{` object in the React app use the history api to change the url without reloading the page. React Router listens for these url changes and renders the right component for you. This is why you have to use `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Link`}</MDXTag>{` and not a regular `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`a`}</MDXTag>{` element, which results in a page refresh for the url you're trying to link to.`}</MDXTag>\n      <h3 id=\"development\">Development</h3>\n      <MDXTag name=\"p\" components={components}>{`Locally, we've configured the webpack dev server to do the same redirects as nginx, however they are duplicated in a couple places:`}</MDXTag>\n      <MDXTag name=\"ul\" components={components}>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/master/script/build.js\"\n          }}>{`script/build.js`}</MDXTag></MDXTag>\n        <MDXTag name=\"li\" components={components} parentName=\"ul\"><MDXTag name=\"a\" components={components} parentName=\"li\" props={{\n            \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/test-server.js\"\n          }}>{`src/platform/testing/e2e/test-server.js`}</MDXTag>{` (for e2e tests)`}</MDXTag>\n      </MDXTag>\n      <MDXTag name=\"p\" components={components}>{`You will need to update these locations as well as the nginx config when creating a new React application.`}</MDXTag>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {};\n    "],"sourceRoot":""}